<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PC Monitor</title>
    <script>
        async function fetchData() {
            try {
                const response = await fetch("http://192.168.1.72:5000/api/stats");
                const data = await response.json();

                document.getElementById("cpu").innerText = `CPU Usage: ${data.cpu_usage || "N/A"}`;
                document.getElementById("cpu_temp").innerText = `CPU Temp: ${data.cpu_temp || "N/A"}`;
                document.getElementById("cpu_power").innerText = `CPU Power: ${data.cpu_power || "N/A"}`;

                document.getElementById("gpu").innerText = `GPU Usage: ${data.gpu_usage || "N/A"}`;
                document.getElementById("gpu_temp").innerText = `GPU Temp: ${data.gpu_temp || "N/A"}Â°`;
                document.getElementById("gpu_power").innerText = `GPU Power: ${data.gpu_power || "N/A"}`;

                document.getElementById("ram").innerText = `RAM Usage: ${data.ram_usage_mb || "N/A"}`;

            } catch (error) {
                console.error("Error fetching system data:", error);
            }
        }

        // Refresh every 2 seconds
        setInterval(fetchData, 2000);
    </script>
    
</head>
<body>
    <h1>PC Resource Monitor</h1>
    <p id="cpu">CPU Usage: Loading...</p>
    <p id="cpu_temp">CPU Temp: Loading...</p>
    <p id="cpu_power">CPU Power: Loading...</p>
    
    <p id="gpu">GPU Usage: Loading...</p>
    <p id="gpu_temp">GPU Temp: Loading...</p>
    <p id="gpu_power">GPU Power: Loading...</p>

    <p id="ram">RAM Usage: Loading...</p>
</body>
</html>
